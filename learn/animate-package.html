<!DOCTYPE html>
<html>
<head>
	<title></title>
	<meta charset="utf-8">
	<style type="text/css">
		*{
			margin:0;
			padding:0;
		}
		#box{
			width:100px;
			height:100px;
			background:#52F65F;
			margin-top:100px;
			position:absolute;
		}
	</style>
</head>
<body>
	<button pos="400">移到400px</button>
	<button pos="800">移到800px</button>
	<div id="box"></div>
</body>
<script type="text/javascript">
	var box = document.getElementById('box');
	var btn = document.getElementsByTagName('button');
	//Error
	// function animate(box,pos){
	// 	if(pos == parseInt(box.offsetLeft)){   
	// 	}
	// 	var timer = null;  应该通过添加属性来设置唯一的timer，避免双击又会运动问题
	// 		return;
	// 	clearInterval(timer);
	// 	var speed = box.offsetLeft-pos>0?-10:10;  最好直接比大小
	// 	timer = setInterval(function(){
	// 		box.style.left = box.offsetLeft+speed+"px";
	// 		if(Math.abs(pos-parseInt(box.offsetLeft))<Math.abs(speed)){    应提前计算出来差值，现在的状态不符合逻辑
	// 			box.style.left = pos + "px"
	// 			clearInterval(timer)	
	// 		}
	// 	},10);
		
	// }

	function animate(ele,target){
                clearInterval(ele.timer);
                var speed = target>ele.offsetLeft?10:-10;
                ele.timer = setInterval(function () {
                    var val = target - ele.offsetLeft;
                    ele.style.left = ele.offsetLeft + speed + "px";
                    if(Math.abs(val)<Math.abs(speed)){
                        ele.style.left = target + "px";
                        clearInterval(ele.timer);
                    }
                },10)
            }

	for(var i=0;i<btn.length;i++){
		btn[i].onclick = function(){
			animate(box,this.getAttribute('pos'));
		}
	}


		
	


</script>
</html>